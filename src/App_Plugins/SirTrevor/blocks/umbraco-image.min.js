SirTrevor.Blocks.UmbracoImage=function(){var t=angular.element("body").injector(),i=t.get("mediaHelper"),r=t.get("dialogService"),u=t.get("mediaResource"),n;return SirTrevor.Block.extend({type:"umbraco_image",title:function(){return"Image"},droppable:!1,uploadable:!1,pastable:!1,ajaxable:!1,icon_name:"image",loadData:function(t){n=this;n.setImage(t.id)},onBlockRender:function(){typeof this.blockStorage.data.id=="undefined"&&(n=this,r.mediaPicker({onlyImages:!0,callback:this.onMediaSelected}))},onMediaSelected:function(t){var i={};i.id=t.id;i.contentTypeAlias=t.contentTypeAlias;n.setAndLoadData(i);n.ready()},setImage:function(t){var r=n;u.getById(t).then(function(n){var t=i.resolveFile(n,!0);r.$editor.html($("<img>",{src:t,"class":"ust-previewimg"}))})}})}();
/*
//# sourceMappingURL=umbraco-image.min.js.map
*/